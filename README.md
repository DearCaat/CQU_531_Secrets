# é‡å¤§è½¯é™¢531å®éªŒå®¤ç§˜ç±

æˆ‘å‘ç°åœ¨ç ”ç©¶ç”Ÿå­¦ä¹ ä¸­é‡åˆ°çš„å¾ˆå¤šé—®é¢˜éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä¸ç®¡æ˜¯ç§‘ç ”ä»»åŠ¡ã€ä»£ç å®ç°ã€æœåŠ¡å™¨ç®¡ç†ã€‚ä½†ä¸€å±Šä¸€å±Šçš„å¸ˆå…„å¸ˆå¼Ÿéƒ½åœ¨æ‰¾ç€åŒæ ·çš„èµ„æ–™ï¼Œæµªè´¹ç€åŒæ ·çš„æ—¶é—´ã€‚æˆ‘å¸Œæœ›è¿™ç§ç»éªŒè´´èƒ½å¤Ÿå¸®åŠ©æ–°è€åŒå­¦ï¼Œæ–°åŒå­¦èƒ½å¤Ÿæ›´å¿«å…¥é—¨ï¼Œè€åŒå­¦æ²¡å¿…è¦å»çº ç»“è‡ªå·±ä¸€å¹´å‰è§£å†³è¿‡çš„é—®é¢˜ã€‚ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œå¸Œæœ›åŒå­¦ä»¬ä¸€èµ·åˆ†äº«ã€è®¢æ­£ã€è¡¥å…… (ç•™ä¸‹Issuesæˆ–è€…ç›´æ¥è”ç³»æˆ‘) ğŸ¤—ã€‚

**Notes:** å¾ˆå¤šå†…å®¹æ²¡æœ‰å…·ä½“è¯¦ç»†çš„ä»£ç å’ŒæŒ‡ä»¤ï¼Œåªä¼šæä¾›ä¸€ä¸ªæ€è·¯æˆ–è€…å…³é”®è¯ï¼Œå¸Œæœ›åŒå­¦ä»¬èƒ½å¤Ÿå–„ç”¨**ChatGPT**ã€**Bing AI**ã€**Google** ğŸ˜€ã€‚

**Tips:**

- **ä»£ç é—®é¢˜**ï¼šä¼˜å…ˆæŸ¥çœ‹ç›¸åº”çš„å®˜æ–¹æ–‡æ¡£ã€Githubå®˜æ–¹ä»“åº“çš„Issuesï¼ˆå¾ˆå¤šè½¯ä»¶æˆ–è€…åŒ…éƒ½æ˜¯å¼€æºçš„ï¼Œéƒ½æœ‰å®˜æ–¹ä»“åº“ï¼Œ***ç‰¹åˆ«æ˜¯å½“ä½ å¤ç°äººå®¶è®ºæ–‡çš„æ—¶å€™ï¼Œæ‰¾åˆ°ä½œè€…çš„ä»“åº“ï¼Œç„¶åç›´æ¥çœ‹Issuesæˆ–è€…æå‡ºIssues***ï¼‰ã€Bing AI
- **è®ºæ–‡é—®é¢˜**ï¼šæœ€å¥½çœ‹åŸæ–‡ï¼Œå†ç»“åˆå®˜æ–¹ä»£ç ã€‚çŸ¥ä¹æˆ–è€…CSDNè§£æéƒ½å·®å¾ˆå¤šæ„æ€ï¼Œè€Œä¸”æœ€æ–°çš„æ–‡ç« ä¸€èˆ¬æ²¡æœ‰ï¼ˆè¯¥å»ºè®®æ¥è‡ªäºå…¶å®ƒå¤§ä½¬ï¼‰
- **Latexé—®é¢˜**ï¼šBing AIã€Googleã€Overleafï¼ˆOverleafä¸Šå…¶å®æœ‰å¾ˆå¤šå¾ˆå¤šLatexç›¸å…³çš„è¯­æ³•æˆ–è€…ç¼–è¯‘é—®é¢˜è§£ç­”ï¼Œæ–‡æ¡£è¾ƒå…¨ï¼Œä¸€èˆ¬èƒ½è§£å†³é—®é¢˜ï¼‰
- **Adobeç ´è§£**ï¼šhttps://baiyunju.cc/8602 ï¼ˆä¸€èˆ¬æ¥è¯´è€çš„ç‰ˆæœ¬å¯ä»¥ç”¨[amt-emulator](https://amtemu-official.com/amtemu-v0-9-2-patcher/)ï¼Œå»ç ´è§£`amtlib.ddl`ï¼Œåªè¦åŒ…å«`amtlib.ddl`çš„ç‰ˆæœ¬åº”è¯¥éƒ½èƒ½ç ´è§£ï¼Œä¸ä»…ä»…æ˜¯2017åŠä»¥å‰ã€‚**ä½†æ˜¯vposyå¤§ç¥çš„ç‰ˆæœ¬æ„Ÿè§‰æ›´å¥½ç”¨æ›´å®‰å…¨ç‚¹ï¼Œå°±æ˜¯å¯èƒ½ç™¾åº¦ç½‘ç›˜ä¸‹è½½é€Ÿåº¦æœ‰ç‚¹é—®é¢˜ï¼Œ[è¿™é‡Œ](https://baiyunju.cc/10362)ä¹Ÿæœ‰ä¸ªå¦¥åçš„åŠæ³•**ï¼‰
- **å®éªŒé—®é¢˜**ï¼šæ¨èå¤§å®¶ä½¿ç”¨**Dockerã€Wandbã€Git**ç®¡ç†è‡ªå·±çš„å®éªŒç¯å¢ƒã€æ•°æ®ã€ä»£ç ã€æ¨¡å‹ã€‚è¿™å¯èƒ½æ˜¯å®Œæˆé«˜è´¨é‡å®éªŒçš„ä¸€ä¸ªåŸºç¡€ï¼Œæœ‰åˆ©äºä½ å®éªŒç»“æœçš„ç¨³å®šæ€§ã€å¯å¤ç°æ€§ã€å¯æ‰©å±•æ€§ ï¼ˆ***æ®æˆ‘äº†è§£ï¼Œåœ¨å¤§ç»„ã€å…¬å¸è¿™å‡ ä¹æ˜¯å¿…é¡»çš„æµç¨‹***ï¼‰

**Resources:**

- **wandb**ï¼š http://10.236.11.202:8080. ç”¨æˆ·åå’Œå¯†ç ç§ä¸‹æ‰¾æˆ‘
- **docker registry**: http://10.236.11.202:5000. ç”¨æˆ·åå’Œå¯†ç ç§ä¸‹æ‰¾æˆ‘
- **New Bing (ç ´è§£ç‰ˆ)**: http://10.236.11.67:3001/

**Status:** æ•´ç†ä¸­~~~~~~~



## Table of Contents

- [å·¥å…·](#å·¥å…·æ¨è)
- [è®ºæ–‡]()
  - [å¦‚ä½•æ‰¾è®ºæ–‡](#å¦‚ä½•æ‰¾è®ºæ–‡)
  - [å¦‚ä½•å†™Pytochæ ¼å¼çš„ä¼ªä»£ç ](#å¦‚ä½•ç”¨latex-å†™-pytorch-pseudocode)
  - [å¦‚ä½•æ’å…¥å¤šä¸ªå‚è€ƒæ–‡çŒ®å°èŠ‚](#å¦‚ä½•åœ¨latexä¸­å¼•å…¥å¤šä¸ªbib)
  - [å¦‚ä½•æ‰¾åˆ°è®ºæ–‡å¤ç°ä»£ç ](#å¦‚ä½•æ‰¾åˆ°è®ºæ–‡å¤ç°ä»£ç è¾ƒä¸ºé‡è¦)
- [å®éªŒ]()
  - [Dockerç›¸å…³]()
    - [å¦‚ä½•åœ¨Rootlessçš„æƒ…å†µä¸‹ä½¿ç”¨Docker](#å¦‚ä½•åœ¨rootlessçš„æƒ…å†µä¸‹ä½¿ç”¨docker)
    - [å¦‚ä½•åœ¨Dockerä¸­ä½¿ç”¨CUDA](#docker-æ”¯æŒcuda)
    - [å¦‚ä½•æ­å»ºç§æœ‰ä»“åº“](#æ­å»ºç§æœ‰docker-registry)
    - [å¦‚ä½•ç”¨Dockerè·‘å®éªŒï¼ˆæŒç»­æ›´æ–°ä¸­ï¼‰](#ç”¨dockerè·‘å®éªŒ)
  - [Linuxç›¸å…³ï¼ˆUbuntuï¼‰]()
    - [å¦‚ä½•é‡è£…Ubuntu](#å¦‚ä½•é‡è£…ubuntu)
    - [å¦‚ä½•åœ¨çº¿æ›´æ–°Ubuntu](#åœ¨çº¿å‡çº§ubuntuæœåŠ¡å™¨)
    - [å¦‚ä½•è£…Nvidia3ä»¶å¥—ï¼Œnvidia-smiç›¸å…³](#å®‰è£…nvidiaé©±åŠ¨)
    - [å¦‚ä½•ç»™Ubuntuç¿»å¢™](#ubuntué…ç½®clash)
    - [å¦‚ä½•æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜](#ubuntuä¸‹æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜å¹¶ä¿®æ”¹æƒé™)
    - [è·¨ç½‘æ®µä¼ è¾“æ–‡ä»¶ï¼Œsshè¿æ¥](#è·¨ç½‘æ®µsshè¿æ¥)
  - [å¦‚ä½•ç»™æœåŠ¡å™¨è”ç½‘ï¼ˆdogcomï¼‰](#å¦‚ä½•ç»™æœåŠ¡å™¨è”ç½‘dogcom)
  - [å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šå†™ä»£ç ï¼ˆVSCodeï¼‰](#å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šå†™ä»£ç vscode)
  - [å¦‚ä½•ç”¨æ›´å°‘æ˜¾å­˜æ›´å¿«æ›´å¥½è·‘å®éªŒ ï¼ˆAMPï¼‰](#å¦‚ä½•ç”¨æ›´å°‘æ˜¾å­˜æ›´å¿«æ›´å¥½è·‘å®éªŒ-amp)
  - [å¦‚ä½•ç®¡ç†å®éªŒæ•°æ®ï¼ˆä½¿ç”¨Wandb+Gitï¼‰](#å¦‚ä½•ç®¡ç†å®éªŒæ•°æ®-ä½¿ç”¨wandbgit)
  - [å¦‚ä½•ç®¡ç†wandbæœåŠ¡å™¨](#é‡æ–°åˆ›å»ºapp)
  - [å¦‚ä½•è¿œç¨‹æ“ä½œå®éªŒå®¤ç”µè„‘](#å¦‚ä½•è¿œç¨‹æ“ä½œå®éªŒå®¤ç”µè„‘)
  - [å¦‚ä½•æŠ¢å¡](#å¦‚ä½•æŠ¢å¡æ…ç”¨æ…ç”¨æ…ç”¨)
  - [å¦‚ä½•åœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´åŒæ­¥ä»£ç ](#å¦‚ä½•åœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´åŒæ­¥ä»£ç )
  - [å¦‚ä½•å°†Tensorflowæ¨¡å‹è½¬Pytorch](#å¦‚ä½•å°†kerasæ¨¡å‹-tensorflow-è½¬torch)
  - [å¦‚ä½•ä»…è®©éƒ¨åˆ†IPé€šè¿‡æŒ‡å®šVPN](#å¦‚ä½•ä»…è®©éƒ¨åˆ†ipé€šè¿‡æŒ‡å®švpnwindows--é»˜è®¤vpn-ä¿®æ”¹è·¯ç”±)
  - [å¦‚ä½•åœ¨æœåŠ¡å™¨ä¹‹é—´æˆ–æœåŠ¡å™¨ä¸æœ¬åœ°ä¼ è¾“æ•°æ®é›†](#å¦‚ä½•ä¼ è¾“æ•°æ®é›†)
  - [æ˜¾å¡é©±åŠ¨æ‰äº†å¦‚ä½•é‡è£…](#å¦‚ä½•é‡è£…é©±åŠ¨)

## å·¥å…·æ¨è

å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨

### ReadPaperï¼ˆè®ºæ–‡ç®¡ç†ï¼‰

> æˆ‘å°è¯•ä½¿ç”¨è¿‡Zoteroè¿™ç§è‡ªå®šä¹‰æ›´é«˜çš„å·¥å…·ï¼Œä½†**ReadPaper**ç›¸å…³åŠŸèƒ½æ›´æ˜“ç”¨ä¸”æ›´å®Œå–„ã€‚ä¸ªäººæ¨èã€‚

### Edgeæµè§ˆå™¨ï¼ˆå¤šç«¯åŒæ­¥ï¼‰

> å¯ä»¥åœ¨è®¾ç½®é‡Œé¢é€‰æ‹©ä¸‹è½½é¢„è§ˆç‰ˆï¼ˆ`dev`ç‰ˆï¼‰ï¼Œä¸€èˆ¬æ¥è¯´å¯ä»¥å…ˆäº«å—æ–°çš„features

### Adobe Acrobat Pro DCï¼ˆPDFç¼–è¾‘å™¨ï¼‰

> ä¸ªäººè®¤ä¸ºé‡è¦ç¨‹åº¦å¤§äºPhotoshopï¼Œå¾ˆå¤šæ—¶å€™ä½ ä¸èƒ½På›¾ï¼Œä½†ä½ éœ€è¦å¤„ç†PDF
>
> ç ´è§£ç‰ˆ
> [ç™¾åº¦äº‘](https://pan.baidu.com/s/1gTELjmDeXPM6F_fn-a7X4g?pwd=8hmq)ï¼Œæ›´å¤šä¿¡æ¯è§[æ–‡ç« å¼€å¤´ï¼ŒAdobeç ´è§£éƒ¨åˆ†](#é‡å¤§è½¯é™¢531å®éªŒå®¤ç§˜ç±)

### KeePass2ï¼ˆå¯†ç å­˜å‚¨ã€å¤šç«¯åŒæ­¥ï¼‰

> æ¨èå’ŒOneDriveä¸€èµ·ä½¿ç”¨ï¼Œä¸€èˆ¬æ¥è¯´OneDriveæœ‰é€çš„5Gç©ºé—´ã€‚ç›´æ¥æŠŠæ•°æ®åº“æ”¾åœ¨OneDriveä¸Šï¼Œå®ç°å¤šç«¯åŒæ­¥ï¼Œéå¸¸ç®€å•

### Typoraï¼ˆMarkdownç¼–è¾‘å™¨ï¼‰

> Bç«™æœ‰ç ´è§£æ•™ç¨‹ï¼Œç›´æ¥ä¹°ä¹Ÿä¸è´µ

### Notepad++ï¼ˆä»£ç æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰

> ä»€ä¹ˆéƒ½å¥½å°±æ˜¯ä½œè€…æ”¿æ²»å€¾å‘æœ‰é—®é¢˜ï¼Œå®¹æ˜“è¢«æ¶å¿ƒ

### SumatraPDFï¼ˆPDFæµè§ˆå™¨ï¼‰

> å¯ä»¥å’ŒVSCodeæ­é…ä½¿ç”¨ï¼Œåœ¨æœ¬åœ°æ­å»ºTexliveç¯å¢ƒ

### Bandizipï¼ˆå‹ç¼©è½¯ä»¶ï¼‰

### Overleaf (å¤šç”¨æˆ·ååŒï¼Œå¤šç‰ˆæœ¬)

> - å¤šç”¨æˆ·ååŒæ˜¯ä¼˜äºæœ¬åœ°`Texlive+Git`ï¼Œè€Œä¸”å¯ä»¥ä»»æ„ä½¿ç”¨å¤šç‰ˆæœ¬`Texlive`ï¼Œæœ‰æ—¶å€™éœ€è¦åˆ‡æ¢ç‰ˆæœ¬
> - æ³¨æ„Overleafé»˜è®¤ç¼–è¯‘æ¡ä»¶ç‰¹åˆ«å®½æ¾ï¼Œå¯ä»¥è¿›è¡Œè®¾å®š
> - Overleafè¿˜å¯ä»¥ç›´æ¥å‘å¸ƒï¼Œè¿™ä¸ªåŠŸèƒ½æˆ‘è¿˜åœ¨æ¢ç´¢ä¸­

### Rufusï¼ˆISOåˆ»å½•è½¯ä»¶ï¼‰

> å¥½ç”¨ï¼Œé‡è£…ç³»ç»Ÿæ¨èï¼Œç‰¹åˆ«æ˜¯Linux


## å¦‚ä½•æ‰¾è®ºæ–‡

> - Google Scholar å…³é”®è¯ï¼Œå»ºè®®å…ˆæ‰¾ç»¼è¿°
> - çœ‹æœ€æ–°é¡¶ä¼šæ–‡ç« ä¸­çš„ç›¸å…³å·¥ä½œï¼ˆå¾ˆå¥½ç”¨ï¼Œä¸€èˆ¬æ¥è¯´**å¤§ç»„é¡¶ä¼š**æ–‡ç« çš„ç›¸å…³å·¥ä½œåšçš„éå¸¸è¯¦ç»†ï¼‰

### easyScholarï¼ˆæµè§ˆå™¨æ’ä»¶ï¼‰

> è¿™ä¸ªæ’ä»¶å¯ä»¥æ˜¾ç¤ºå‡ºè®ºæ–‡å‘è¡¨æœŸåˆŠä¼šè®®çš„CCFç­‰çº§ã€æ‰€å±å‡ºç‰ˆå•†ã€IFã€SCIåˆ†åŒºç­‰


## å¦‚ä½•ç”¨Latex å†™ Pytorch pseudocode 

### å¼•å…¥åŒ…

```latex
\usepackage[ruled,noline]{algorithm2e}
\usepackage{setspace}  % change the margin

\definecolor{commentcolor}{RGB}{110,154,155}   % define comment color
\newcommand{\PyComment}[1]{\ttfamily\textcolor{commentcolor}{\# #1}}  % add a "#" before the input text "#1"
\newcommand{\PyCode}[1]{\ttfamily\textcolor{black}{#1}} % \ttfamily is the code font
```

### ä»£ç 

```latex
\setlength{\algomargin}{0em}  % change the margin
\SetAlFnt{\small}             % set the font size
\begin{algorithm}[thb]
	\setstretch{0.8}          % chagne the line spacing
	\PyComment{this is a comment} \\
    \PyComment{this is a comment} \\
    \PyComment{} \\
    \PyComment{going to have indentation} \\
    \PyCode{for i in range(N):} \\
    \Indp   % start indent
        \PyComment{your comment} \\
        \PyCode{your code} \PyComment{inline comment} \\ 
        \Indm % end indent, must end with this, else all the below text will be indented
        \PyComment{this is a comment} \\
        \PyCode{your code}
    \caption{PyTorch-style pseudocode for PicT testing scheme}
    \label{algo:your-algo}
\end{algorithm}
```



## å¦‚ä½•åœ¨Latexä¸­å¼•å…¥å¤šä¸ªbib

[Creating multiple bibliographies in the same document - Overleaf, Online LaTeX Editor](https://www.overleaf.com/learn/latex/Questions/Creating_multiple_bibliographies_in_the_same_document#Packages_for_BibTeX)

### ä½¿ç”¨multibibåŒ…

```latex
\usepackage[resetlabels,labeled]{multibib}

\newcites{Math}{Math Readings}
\newcites{Phys}{Physics Readings}
```

```latex
\cite{paper1} and \cite{paper2} were published later than 
\citeMath{paper3}. See also \citePhys{paper4}.

\bibliographystyle{unsrt}
\bibliography{references}

\bibliographystyleMath{unsrt}
\bibliographyMath{refs-etc}

\bibliographystylePhys{unsrt}
\bibliographyPhys{refs-etc}
```

> - å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¯¥åŒ…ä¼šç”Ÿæˆå¤šä¸ª .auxæ–‡ä»¶ï¼Œå¿…é¡»å¯¹æ¯ä¸ªæ–‡ä»¶éƒ½è¿›è¡Œbibtexç¼–è¯‘åï¼Œå†ä½¿ç”¨pdftexç¼–è¯‘
> - æ¯ä¸ªéƒ¨åˆ†çš„bibæ–‡ä»¶æœ€å¥½å•ç‹¬å­˜æ”¾ï¼Œå¹¶å•ç‹¬å‘½ä»¤å„è‡ªçš„å¼•ç”¨æ–‡ç« ç®€å†™



## å¦‚ä½•æ‰¾åˆ°è®ºæ–‡å¤ç°ä»£ç ï¼ˆè¾ƒä¸ºé‡è¦ï¼‰

> - å…ˆçœ‹è®ºæ–‡æœ¬èº«ï¼Œä¸€èˆ¬åœ¨**é¦–é¡µã€æ‘˜è¦**æœ‰å®˜æ–¹é“¾æ¥ï¼Œæˆ–è€…**å®éªŒéƒ¨åˆ†ã€è¡¥å……æ–‡æ¡£**
> - **Github**ï¼Œ***ç›´æ¥åœ¨æœç´¢æ¡†æœè®ºæ–‡åå­—***ï¼Œå‡ ä¹æ‰€æœ‰æ”¾åœ¨githubä¸Šçš„å¤ç°ä»£ç ï¼Œéƒ½ä¼šåœ¨readmeä¸­å†™ä¸Šè®ºæ–‡æ ‡é¢˜ã€‚è¿™ç§æ–¹æ³•ç‰¹åˆ«é‡è¦ï¼Œå› ä¸ºä¸€äº›å®éªŒå®¤çš„ä»£ç å¯èƒ½å¹¶ä¸å¤Ÿå¥½æˆ–è€…ç”¨çš„Tensorflowï¼Œè¿™ç§æ–¹æ³•èƒ½æ‰¾åˆ°ä¸€äº›å¤§ä½¬å¤ç°çš„Pytorchæˆ–è€…è´¨é‡æ›´é«˜çš„ä»£ç 
> - paperwithcodeï¼Œè¿™ä¸ªç½‘ç«™åˆè¡·å¾ˆå¥½ï¼Œä½†è¿‘å‡ å¹´å‡ ä¹æ²¡æœ‰ç»´æŠ¤ï¼Œä¸ªäººæ„Ÿè§‰ä¸å¥½ç”¨



## å¦‚ä½•ç»™æœåŠ¡å™¨è”ç½‘ï¼ˆdogcomï¼‰

> ç°åœ¨å¤–ç•Œæµä¼ çš„`dogcom`å’Œ`dogcom.conf`éå¸¸è€ï¼Œé…ç½®æ–‡ä»¶åœ¨ä¸ªåˆ«æœåŠ¡å™¨ä¸Šå‡ºé”™ï¼Œå¹¶ä¸”ä¸èƒ½ç™»å‡ºã€‚æˆ‘æ ¹æ®[drcom-generic/Drcom_CQU_HuxiCampus.py at master Â· drcoms/drcom-generic (github.com)](https://github.com/drcoms/drcom-generic/blob/master/custom/Drcom_CQU_HuxiCampus.py)é‡æ–°å†™äº†ä¸€ä¸ªpython3çš„è”ç½‘è„šæœ¬ï¼Œæ”¯æŒç™»å‡º
>
> **Tips**ï¼š
>
> - æ ¡å›­ç½‘ä½¿ç”¨å“†ç‚¹è¿›è¡Œè®¤è¯ï¼Œgithubä¸Šæœ‰ç›¸å…³çš„ä»“åº“ï¼š[drcoms/drcom-generic: Dr.COM/DrCOM ç°å·²è¦†ç›– d p xä¸‰ç‰ˆã€‚ (github.com)](https://github.com/drcoms/drcom-generic)ã€[mchome/dogcom at 309db8f545d7454b464a5d5d1d7dc4bde313f07a (github.com)](https://github.com/mchome/dogcom/tree/309db8f545d7454b464a5d5d1d7dc4bde313f07a)ï¼Œå¦‚æœæœ‰é—®é¢˜æˆ–è€…åç»­ä¿®æ”¹ï¼Œå¯ä»¥æŸ¥è¯¢ç›¸å…³ä»“åº“
>
> - `latest_w.py` å’Œ `dr.sh` åœ¨ [/tools/dogcom/](https://github.com/DearCaat/CQU_531_Secrets/tree/main/tools/dogcom)ä¸‹
>
> - è¯·ä¿®æ”¹`latest_w.py`æ–‡ä»¶ä¸­çš„34å’Œ35è¡Œ (`username`å’Œ`password`å˜é‡)ï¼Œä»¥ä½¿ç”¨è‡ªå·±çš„æ ¡å›­ç½‘è´¦æˆ·è¿›è¡Œç™»é™†

```bash
# case1: ç›´æ¥ä½¿ç”¨pythonæ–‡ä»¶ç™»é™†ï¼Œè¿™ç§æƒ…å†µä¼šåœ¨ç»ˆç«¯æ˜¾ç¤ºlogï¼Œå¹¶ä¸”éšç€ç»ˆç«¯çš„killè€Œkillï¼Œæ²¡æœ‰è¿›ç¨‹æŒä¹…åŒ–
python3 latest_w.py
# case1: æŒ‰Ctrl+Cï¼Œç›´æ¥å…³é—­è¯¥è¿›ç¨‹åŒæ—¶ç™»å‡º

# case2: ä½¿ç”¨nohupç»´æŒè¿›ç¨‹æŒä¹…åŒ–ï¼Œæˆ‘è¿™é‡Œå†™äº†ä¸€ä¸ªshell dr.sh
bash dr.sh
# case2: è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·å…ˆä½¿ç”¨psæ‰¾åˆ°ä½ çš„python3è¿›ç¨‹
ps -aux | grep python3
# case2: æ‰¾åˆ°å¯¹åº”çš„ python3 latest_w.py çš„è¿›ç¨‹å·pidï¼Œkillè¯¥è¿›ç¨‹
kill -9 pid
# killè¯¥è¿›ç¨‹çš„åŒæ—¶ç™»å‡ºï¼Œç›¸å…³çš„logä¼šåœ¨./logä¸‹
```



## å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šå†™ä»£ç ï¼ˆVSCodeï¼‰

> VSCodeæœ‰sshæ’ä»¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡sshè¿æ¥æœåŠ¡å™¨ï¼Œå¹¶æ”¯æŒç›´æ¥ç¼–è¾‘æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚æ‰©å±•å¯ä»¥ç›´æ¥è£…åœ¨æœåŠ¡å™¨ä¸Š
>
> Tips: 
>
> - å¯ä»¥ä½¿ç”¨å…¬é’¥ï¼Œé¿å…æ¯æ¬¡æ‰“å¼€æ–‡ä»¶éƒ½éœ€è¦è¾“å…¥å¯†ç ã€‚ï¼ˆå¦‚æœä½ å·²ç»åœ¨æœåŠ¡å™¨`A`ä¸Šé…ç½®äº†å…¬é’¥ç™»å½•ï¼Œé‚£åªéœ€è¦é…ç½®VSCodeçš„sshé…ç½®æ–‡ä»¶å³å¯ï¼‰ç®€å•æµç¨‹å¦‚ä¸‹ï¼š
>   - æœ¬åœ°ä¸»æœºåˆ›å»ºå…¬é’¥ã€ç§é’¥ã€‚å…¬é’¥æ–‡ä»¶ä¸€èˆ¬ä¸º`id_rsa.pub`ï¼Œåœ¨`c:\Users\$username\.ssh\`ä¸‹
>   - å¤åˆ¶ä½ çš„å…¬é’¥å†…å®¹è‡³æœåŠ¡å™¨`A`çš„å¯†é’¥è®¤è¯æ–‡ä»¶`/home/$username/.ssh/authorized_keys`ä¸­
>   - ä¿®æ”¹VSCodeçš„sshé…ç½®æ–‡ä»¶
> - å¦‚æœé‡åˆ°sshé—®é¢˜ï¼Œè¯·æŸ¥çœ‹VSCodeçš„`output`ï¼Œä¸€èˆ¬æ¥è¯´å°†æœåŠ¡å™¨ä¸Šçš„`VSCode Server (/home/$username/.vscode-server/bin/$bin_code)`è¿›è¡Œåˆ é™¤å¯ä»¥è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚å¯ä»¥åœ¨`output`ä¸­æŸ¥çœ‹åˆ°`$bin_code`



## å¦‚ä½•ç”¨æ›´å°‘æ˜¾å­˜æ›´å¿«æ›´å¥½è·‘å®éªŒ ï¼ˆAMPï¼‰

### tmux ä½¿ç”¨

> ä¸è¦ç›´æ¥åœ¨sshçª—å£å¼€å§‹è·‘å®éªŒï¼Œè¯·ä½¿ç”¨`tmux`ï¼Œå…¶ä¼šåˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–çš„çª—å£ã€‚ä»¥é¿å…ä½ å½“å‰çª—å£å› ç‰¹æ®Šæƒ…å†µå´©æºƒå¯¼è‡´çš„å®éªŒä¸­æ–­

```shell
tmux new -s xxx
tmux a -t xxx
tmux kill-session -t xxx
```

### AMPä½¿ç”¨

> è¯·æœ€å¥½ä½¿ç”¨AMPï¼ˆåŠç²¾åº¦ï¼‰è®­ç»ƒï¼Œå®éªŒå®¤GPUèµ„æºè¾ƒä¸ºç´§å¼ ï¼Œä½¿ç”¨AMPè®­ç»ƒå¯ä»¥æœ‰æ•ˆé™ä½æ˜¾å­˜ï¼Œä¹Ÿä¸ä¼šæŸå®³ä½ çš„æ€§èƒ½ã€‚å¤§å‚éƒ½åœ¨ç”¨ï¼Œä¸€èˆ¬æ¥è¯´è®­ç»ƒé€Ÿåº¦è¿˜ä¼šæœ‰æ‰€æå‡

[Automatic Mixed Precision package - torch.amp â€” PyTorch 2.0 documentation](https://pytorch.org/docs/stable/amp.html#autocasting)

### TIMMä½¿ç”¨

> Backboneæ¨¡å‹ä¸æ¨èè‡ªå·±å¤ç°ï¼Œä¹Ÿä¸æ¨èçœ‹CSDNå¤ç°ï¼Œä»…æ¨èæŸ¥çœ‹ç›¸å…³é¢†åŸŸè®ºæ–‡æˆ–[timm](https://github.com/huggingface/pytorch-image-models)ã€‚NLP-Transformerç±»è¯·å‚è§[huggingface](https://github.com/huggingface/transformers)

### è®­ç»ƒä»£ç 

>è®­ç»ƒä»£ç ä¸æ¨èå®Œå…¨è‡ªå·±å†™ï¼Œä¹Ÿä¸æ¨èçœ‹CSDNï¼Œä»…æ¨èæŸ¥çœ‹ç›¸å…³é¢†åŸŸè®ºæ–‡ï¼ˆ**å¤§ç»„**ï¼‰ï¼Œæˆ–è€…å¤§ä½¬çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘è§‰å¾—å¾ˆå¥½çš„å‡ ä¸ªä¾‹å­ï¼š
>
>[timm](https://github.com/huggingface/pytorch-image-models/blob/main/train.py)
>
>[swin](https://github.com/microsoft/Swin-Transformer/blob/main/main.py)
>
>- æ¨èä½¿ç”¨`yaml`æ–‡ä»¶å­˜å‚¨configï¼Œè€Œéå…¨éƒ¨configå†™åœ¨`parser`ä¸­
>- ä¸¤ä¸ªä¾‹å­ä¸­æœ‰ç‰¹åˆ«å¤šçš„`trick`ï¼Œä¾‹å¦‚`batchsize scale, amp, ddp, gradient accumulate, gradient clip, mixup, checkpoint, ... `å¾ˆå¤štrickèƒ½æœ‰æ•ˆæç‚¹ï¼Œæœ‰äº›æ²¡æœ‰è¿™ä¹ˆç¥å¥‡



## å¦‚ä½•ç®¡ç†å®éªŒæ•°æ® ï¼ˆä½¿ç”¨Wandb+Gitï¼‰

> ç®¡ç†å®éªŒæ•°æ®ã€ä»£ç ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«é‡è¦ã€‚ä¸€èˆ¬æ¥è¯´å®éªŒä»£ç ä¼šéšç€ä½ çš„ç ”ç©¶è¿›ç¨‹ä¸æ–­è¿­ä»£ï¼Œä½†ä¸€èˆ¬äººçš„æ°´å¹³éƒ½å¾ˆéš¾åšåˆ°ä¸€ç›´è¿­ä»£è¿˜èƒ½ä¿è¯èƒ½å¤ç°ä¹‹å‰ç»“æœã€‚å› æ­¤æœ€å¥½å¯¹å®éªŒä»£ç åšç‰ˆæœ¬ç®¡ç†
>
> **Wandb**ï¼š
>
> - å­˜å‚¨ä½ çš„Gitçš„`checkout`ï¼Œæœ¬èº«ä¹Ÿå¯ä»¥å­˜å‚¨ä»£ç æ–‡ä»¶ï¼Œè¯¦æƒ…æŸ¥çœ‹æ–‡æ¡£
> - è®°å½•æ‰€æœ‰`metrics`å’Œ`log`ï¼Œå¹¶è‡ªåŠ¨æä¾›å¯è§†åŒ–ï¼Œæ–¹ä¾¿åç»­è®ºæ–‡æ’°å†™
> - æ³¨æ„ï¼Œå¦‚æœä¸è®¾å®šå­˜å‚¨è·¯å¾„ï¼ˆæœ¬åœ°ï¼Œåœ¨Pytorchä»£ç ä¸­è®¾å®šï¼‰ï¼Œä¼šé»˜è®¤åœ¨ä½ é¡¹ç›®è·¯å¾„ä¸‹å¤‡ä»½ä¸€ä¸ªå®éªŒæ•°æ®ï¼ˆå¦ä¸€ä»½ä¼ è‡³æœåŠ¡å™¨ï¼‰ã€‚ä¸€èˆ¬æ¥è¯´é¡¹ç›®è·¯å¾„åœ¨`/home/$username/`ä¸‹é¢ï¼Œå› æ­¤è¯·è®¾å®šå­˜å‚¨è·¯å¾„åˆ°`/data/$username`
> - wandbä¹Ÿå¯ä»¥å­˜å‚¨æ¨¡å‹æ¢¯åº¦ï¼Œ`wandb.watch()`ï¼Œè¯¦æƒ…æŸ¥çœ‹æ–‡æ¡£
> - è¯·ä¸è¦å»ºç«‹å¤ªå¤š`project`ï¼Œå› ä¸ºå®éªŒå®¤æœåŠ¡å™¨åªèƒ½æœ‰ä¸€ä¸ªè´¦å·ï¼Œæ‰€æœ‰äººçš„`project`éƒ½åœ¨é‡Œé¢
> - å…·ä½“ipå’Œè´¦å·åè¯¢é—®ç®¡ç†å‘˜

### ç™»å½•

[Basic Setup - Documentation (wandb.ai)](https://docs.wandb.ai/guides/self-hosted/local)

å°†`wandb.your-shared-local-host.com`æ›¿æ¢æˆæœ¬åœ°çš„`IP:Port`

```shell
wandb login --host=http://wandb.your-shared-local-host.com
```

åœ¨ http://wandb.your-shared-local-host.com/settings ç•Œé¢å¯ä»¥æ‰¾åˆ°***API keys***

> ä¸‹é¢éƒ¨åˆ†æ˜¯ç®¡ç†wandbç§äººæœåŠ¡å™¨ï¼Œå¦‚æœåªæ˜¯ä½¿ç”¨è¯·å¿½ç•¥ã€‚è‡³äºå¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨wandbï¼Œè¯·æŸ¥è¯¢å®˜æ–¹document

### é‡æ–°åˆ›å»ºApp

ä¸è¦å¯¹ ***Volumes*** è¿›è¡Œæ“ä½œï¼Œè¿™æ˜¯ä¿å­˜æ•°æ®çš„æ–‡ä»¶ã€‚å¯ä»¥åˆ é™¤ ***Containers*** ï¼Œç„¶ååœ¨WSLä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°æ‰“å¼€ä¸€ä¸ª ***APP***ã€‚ `--restart=always` å¯ä»¥è®©å®¹å™¨æ¯æ¬¡éšç€dockeræœåŠ¡å¯åŠ¨

```shell
docker run -d --mount type=volume,src=wandb,dst=/vol -p 8080:8080 --name wandb-local --restart=always wandb/local
```

### æ›´æ–°Image

```shell
docker pull wandb/local
```

### Volumeçš„è¿ç§»

#### Backup Volume

ç›®æ ‡volumeï¼š`wandb` ,ä¿å­˜ä½ç½®ï¼š`/home/tangwenhao/twh` ï¼Œbackupæ–‡ä»¶åï¼š`backup.tar`

```shell
sudo docker run \
    --rm \
    -v wandb:/files_to_copy \
    -v /home/tangwenhao/twh:/place_to_paste \
    busybox \
    sh -c 'cd /files_to_copy && tar cf /place_to_paste/backup.tar .'
```

#### Restore Volume

ç›®æ ‡volumeï¼š`wandb` ,ä¿å­˜ä½ç½®ï¼š`/home/tangwenhao/twh` ï¼Œbackupæ–‡ä»¶åï¼š`backup.tar`

```shell
$ docker run \
    --rm \
    -v wandb:/place_to_paste \
    -v /home/tangwenhao/twh:/files_to_copy \
    busybox \
    sh -c 'cd /place_to_paste && tar xf /files_to_copy/backup.tar .'
```

### è®°å½•ä¸€æ¬¡ç™»å½•å¤±è´¥å¤„ç†

#### æƒ…å†µï¼šæœªçŸ¥BUGï¼Œçªç„¶æ— æ³•ç™»å½•ã€‚

é€ æˆåŸå› å¯èƒ½æ˜¯ `$VOLUME_DIR/env/users.htpasswd` ä¸‹çš„è®°å½•æ¶ˆå¤±ï¼Œ`user`è¡¨å’Œ`entities`è¡¨ä¸­ä»æœ‰è®°å½•ã€‚æ— æ³•ç™»å½•ï¼Œæ— æ³•é‡ç½®å¯†ç 

#### è§£å†³ï¼šé‡å†™å…¥`/env/users.htpasswd`

åˆ©ç”¨ä¹‹å‰å¤‡ä»½çš„è®°å½•ï¼Œé‡å†™å…¥`/env/users.htpasswd`

```json
1070820773@qq.com:$2a$10$lupwoWa8YKrDmFqKdu4huOqAVHFdCGjHE/ZZG8QpPXRTa.jdPSuWq
#å¯¹åº”å¯†ç ï¼š123456789
```

æ¢å¤æ­£å¸¸

### è®°å½•ä¸€æ¬¡æ›´æ–°linceseçš„å¤„ç†

[system-admin -- Application Error Unable to reach the backend api. If this perists, check the system logs. Â· Issue #46 Â· wandb/server (github.com)](https://github.com/wandb/server/issues/46)



## å¦‚ä½•è¿œç¨‹æ“ä½œå®éªŒå®¤ç”µè„‘

### Windowsè¿œç¨‹æ¡Œé¢è¿æ¥ï¼ˆåªé€‚ç”¨äºå†…ç½‘ï¼‰

> æ¯”å‘æ—¥è‘µå¥½ç”¨100å€ï¼Œä½†**åªé€‚ç”¨äºå†…ç½‘**ï¼Œä½†éœ€è¦**Windowsä¸“ä¸šç‰ˆ**ï¼ˆåœ¨ä½ éœ€è¦è¢«è¿œç¨‹çš„é‚£ä¸ªä¸»æœºä¸Šå®‰è£…ï¼Œæ·˜å®10å…ƒï¼‰

### å‘æ—¥è‘µ



## å¦‚ä½•åœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´åŒæ­¥ä»£ç 

### Git

> é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨`A`ä½œä¸ºè¿œç¨‹ä»“åº“ï¼Œä¿è¯å…¶å®ƒæ‰€æœ‰æœåŠ¡å™¨éƒ½èƒ½ä¸`A`è¿›è¡Œsshè¿æ¥ã€‚è¿™é‡Œæ¨èsshå…¬é’¥çš„å½¢å¼

- è¿™é‡Œéœ€è¦åœ¨å…¶ä½™æœåŠ¡å™¨`B,C,D,...`ä¸Šåˆå§‹åŒ–å…¬é’¥ã€ç§é’¥ï¼ˆå¦‚æœå·²ç»æœ‰è¯·è·³è¿‡ï¼Œä¸€èˆ¬æ¥è¯´å­˜æ”¾åœ¨`/home/$username/.ssh/`ä¸‹åå­—ä¸º`id_rsa.pub`ï¼‰

- å°†æœåŠ¡å™¨`B,C,D,...`ä¸Šçš„å…¬é’¥ä¸­çš„å†…å®¹å¤åˆ¶ä¸‹æ¥ï¼Œç²˜è´´åˆ°æœåŠ¡å™¨`A`çš„è®¤è¯å¯†é’¥æ–‡ä»¶ï¼ˆ`/home/$username/.ssh/authorized_keys`ï¼‰ä¸­ã€‚

- åœ¨æœåŠ¡å™¨`A`ä¸Šåˆå§‹åŒ–`gitæœåŠ¡å™¨`å…¶ç­‰æ•ˆäºè¿œç¨‹ä»“åº“ï¼Œè·å¾—ç›®å½•`/home/$username/.../xx.git`

  ```shell
  git init --bare xx.git
  ```

- åœ¨æœåŠ¡å™¨`B,C,D,...`ä¸Šæ·»åŠ è¿œç¨‹ä»“åº“ï¼Œé€šè¿‡sshçš„å½¢å¼

  ```shell
  ssh://$username@Server_A_IP:/home/$username/.../xx.git
  ```

  è¿™é‡Œçš„`Server_A_IP`æ˜¯æœåŠ¡å™¨`A`çš„IPã€‚

- **Tips**ï¼šå°±ç®—åœ¨æœåŠ¡å™¨`A`ä¸Šï¼Œä¹Ÿè¦åœ¨å¦å¤–ä¸€ä¸ªç›®å½•æ”¾ç½®ä»£ç ï¼Œç„¶åä½¿ç”¨`git`è¿›è¡Œä»£ç ç®¡ç†ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹æœåŠ¡å™¨`A`ä¸Šçš„`gitæœåŠ¡å™¨`çš„ä»£ç ã€‚

### SyncTrayzor

GitHub repo: https://github.com/canton7/SyncTrayzor



## å¦‚ä½•æŠ¢å¡ï¼ˆæ…ç”¨æ…ç”¨æ…ç”¨ï¼‰

> æœ€å¥½ä¸è¦ç”¨ï¼Œä½†ç´§æ€¥æƒ…å†µä¸‹ï¼Œå¯ä»¥ç§ä¸‹è”ç³»æˆ‘ã€‚åç»­æ›´æ–°



## å¦‚ä½•é‡è£…Ubuntu

### ä¿ç•™/home

> ä¸»è¦éš¾ç‚¹åœ¨äºä¹‹å‰çš„ç³»ç»Ÿå¼•å¯¼ï¼ˆUEFIæˆ–è€…Legacyï¼‰è¦ä¸å½“å‰å¯¹åº”ã€‚ä¸ç„¶åœ¨æ–°ç³»ç»Ÿåˆ†åŒºé‚£é‡Œï¼Œæ²¡åŠæ³•åœ¨åŸç¡¬ç›˜ä¸Šè®¾å®šå®‰è£…å¼•å¯¼ç¨‹åº
>
> **é‡ç‚¹åœ¨äºä¸€å®šè¦å¤‡ä»½ï¼ï¼ï¼**

### Tips

> - æ²¡ç½‘çš„æ—¶å€™æ³¨æ„ä¸è¦å…ˆè®¾å®šç½‘ç»œè¿æ¥ï¼Œä¼šå¯¼è‡´åé¢å®‰è£…å¤±è´¥
> - ç¦ç”¨Sleepï¼š`systemcyl status sleep.target` å¯ä»¥æŸ¥çœ‹æ˜¯å¦å¼€å¯è¯¥æœåŠ¡ã€‚ç¦ç”¨ï¼š`sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target`

### è®¾ç½®ç½‘ç»œç¯å¢ƒï¼ˆè®¾ç½®IPï¼‰

> - ä¸€èˆ¬Ubuntuä½¿ç”¨`/etc/netplan` æˆ–è€… `/etc/nework` é…ç½®IPï¼Œè¿™ä¿©åªèƒ½å–å…¶ä¸€ã€‚é…ç½®æ–‡ä»¶å°±åœ¨å…¶ä¸­ã€‚
> - è¦å¼„æ˜ç™½`dhcp`å’Œ`static`ï¼Œæœºæˆ¿é»˜è®¤æ˜¯`static`ï¼Œæ‰¾ç®¡ç†å‘˜è¦ç½‘å…³ã€DNS
> - è®°å¾—å¤‡ä»½é»˜è®¤çš„é…ç½®æ–‡ä»¶ `mv default.yaml default.yaml.backup`
> - è™½ç„¶è¿™ä¸¤ä¸ªå·¥å…·éƒ½å¯ä»¥çƒ­é‡å¯ï¼Œä½†è¿˜æ˜¯æ¨èé‡å¯æœåŠ¡å™¨ï¼Œå¯ä»¥çœå¾ˆå¤šéº»çƒ¦
> - æ³¨æ„ç½‘çº¿æ’çš„ç½‘å£æ˜¯å¦å’Œé…ç½®æ–‡ä»¶ä¸€è‡´ï¼Œå¦‚æœä¸€ç›´ä¸èµ·æ•ˆï¼Œè¯·å°†ç½‘çº¿æ’å…¥å…¶å®ƒç½‘å£è¯•è¯•

### å®‰è£…NVIDIAé©±åŠ¨

#### ç¦ç”¨nouveaué©±åŠ¨

ç¼–è¾‘ `/etc/modprobe.d/blacklist-nouveau.conf` æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```shell
blacklist nouveau
blacklist lbm-nouveau
options nouveau modeset=0
alias nouveau off
alias lbm-nouveau off
```

å…³é—­nouveauï¼š

```shell
echo options nouveau modeset=0 | sudo tee -a /etc/modprobe.d/nouveau-kms.conf
```

é‡æ–°ç”Ÿæˆå†…æ ¸å¹¶é‡å¯ï¼š

```shell
sudo update-initramfs -u
sudo reboot
```

é‡å¯åï¼Œæ‰§è¡Œï¼š`lsmod | grep nouveau`ã€‚**å¦‚æœæ²¡æœ‰å±å¹•è¾“å‡ºï¼Œè¯´æ˜ç¦ç”¨nouveauæˆåŠŸã€‚**

#### Tips

> - æ³¨æ„ï¼Œå®‰è£…çš„driverç‰ˆæœ¬æœ€å¥½å’ŒCUDAç‰ˆæœ¬ç›¸å¯¹åº”ã€‚å„ä¸ªCUDAç‰ˆæœ¬çš„Docï¼š[CUDA Toolkit Archive | NVIDIA Developer](https://developer.nvidia.com/cuda-toolkit-archive)ã€‚åœ¨æ­¤å¤„æŸ¥çœ‹ï¼š[Release Notes :: CUDA Toolkit Documentation (nvidia.com)](https://docs.nvidia.com/cuda/archive/11.7.0/cuda-toolkit-release-notes/index.html)
> - `nvidia-smi` æœ‰æ—¶å€™å¾ˆæ…¢ï¼Œæ³¨æ„æ›´æ”¹æŒä¹…æ¨¡å¼ï¼š`sudo nvidia-persistenced --persistence-mode` æˆ–è€… `sudo nvidia-smi -pm 1`
> - Ubuntué‡å¯æœ‰å¯èƒ½æ‰¾ä¸åˆ°Driverï¼Œä¸€èˆ¬æƒ…å†µæ˜¯å†…æ ¸è¿›è¡Œäº†æ›´æ–°ã€‚ä½¿ç”¨`ls /usr/src`æŸ¥çœ‹é©±åŠ¨ç‰ˆæœ¬å·ï¼Œç„¶åç”Ÿæˆå¯¼å‘æ¨¡å—`sudo dkms install -m nvidia(nvidia-srv) -v 530.30.02`ã€‚[Ubuntu20.04é‡å¯åæ‰¾ä¸åˆ°Nvidiaæ˜¾å¡é©±åŠ¨ - keep-minding - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/minding/p/17449134.html)

#### å®‰è£…Driver

é‡‡ç”¨aptæ–¹æ³•

ä½¿ç”¨å‘½ä»¤`ubuntu-drivers devices`è·å–å¯ç”¨é©±åŠ¨ä¿¡æ¯ï¼Œå¦‚æœå‘½ä»¤ä¸å­˜åœ¨è‡ªå·±å®‰è£…ä¸€ä¸‹ã€‚

`sudo apt install nvidia-driver-***-server`

#### å®‰è£…CUDA

[CUDA Toolkit Archive | NVIDIA Developer](https://developer.nvidia.com/cuda-toolkit-archive)

é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ï¼Œæœ€å¥½é‡‡ç”¨runfileçš„å®‰è£…å½¢å¼ï¼Œæœ‰ä¸€ä¸ªäº¤äº’è¿‡ç¨‹ï¼Œ**debçš„å®‰è£…ä¼šé»˜è®¤æ›¿æ¢æ‰ä½ å…ˆæœ‰çš„driverï¼Œéå¸¸éº»çƒ¦**

`sudo sh cuda_11.4.0_470.42.01_linux.run`

**åˆ‡è®°ï¼šå®‰è£…driverä¹‹åï¼Œä¸è¦åœ¨å®‰è£…CUDAæ—¶å†æ¬¡å®‰è£…ï¼ï¼ï¼**

**æ³¨æ„ï¼Œå½“æé†’ä½ å·²ç»å®‰è£…äº†driverçš„æ—¶å€™ï¼Œç›´æ¥continueã€‚å½“é€‰æ‹©å®‰è£…å†…å®¹çš„æ—¶å€™ï¼ŒåŠ¡å¿…æŠŠdriverå‰é¢çš„xå–æ¶ˆæ‰ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å®‰è£…äº†é©±åŠ¨ï¼ï¼ï¼**

æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

`vim /etc/profile` ï¼šï¼ˆå°† `***` æ›¿æ¢ä¸ºå¯¹åº”çš„CUDAç‰ˆæœ¬ï¼‰

```shell
export PATH=/usr/local/cuda-***/bin${PATH:+:${PATH}}
export LD_LIBRARY_PATH=/usr/local/cuda-***/lib64\
                         ${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
```

`nvcc -V` æ˜¾ç¤ºç›¸å…³ä¿¡æ¯ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ

#### å®‰è£…CUDNN

[CUDA Deep Neural Network (cuDNN) | NVIDIA Developer](https://developer.nvidia.com/cudnn)

[Installation Guide :: NVIDIA Deep Learning cuDNN Documentation](https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html)

æœ€å¥½ä¸‹è½½TARï¼Œç„¶åå¤åˆ¶

è§£å‹ï¼š

```shell
tar -xvf cudnn-linux-x86_64-8.x.x.x_cudaX.Y-archive.tar.xz
```

å¤åˆ¶ï¼š

```shell
$ sudo cp cudnn-*-archive/include/cudnn*.h /usr/local/cuda/include 
$ sudo cp -P cudnn-*-archive/lib/libcudnn* /usr/local/cuda/lib64 
$ sudo chmod a+r /usr/local/cuda/include/cudnn*.h /usr/local/cuda/lib64/libcudnn*
```



## å¦‚ä½•åœ¨RootLessçš„æƒ…å†µä¸‹ä½¿ç”¨Docker

### å°†æ™®é€šç”¨æˆ·æ·»åŠ åˆ°Dockerç”¨æˆ·ç»„

[dockerå‘½ä»¤ æŠ¥Got permission denied while trying to connect to é”™è¯¯ - ranh - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/hwwei/p/16018100.html)

```shell
sudo usermod -aG docker $username
```

### ä½¿ç”¨Root-less Docker

> Rootless mode allows running the Docker daemon and containers as a non-root user to mitigate potential vulnerabilities in the daemon and the container runtime.
>
> Rootless mode does not require root privileges even during the installation of the Docker daemon, as long as the [prerequisites](https://docs.docker.com/engine/security/rootless/#prerequisites) are met.
>
> Rootless mode was introduced in Docker Engine v19.03 as an experimental feature. Rootless mode graduated from experimental in Docker Engine v20.10.

[Run the Docker daemon as a non-root user (Rootless mode) | Docker Documentation](https://docs.docker.com/engine/security/rootless/)

***è¿™ç§æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªå•ç‹¬çš„Dockerï¼Œç›¸äº’ç‹¬ç«‹***

***rootless Dockerå­˜åœ¨ä¸€å®šé™åˆ¶ï¼š***

[Run the Docker daemon as a non-root user (Rootless mode) | Docker Documentation](https://docs.docker.com/engine/security/rootless/#known-limitations)

**åˆ·æ–°é…ç½®ï¼Œé‡å¯æœåŠ¡ï¼š**

```shell
systemctl --user daemon-reload
systemctl --user restart docker
```

æ›´å¤šRootlessçš„ [TIPS](https://blog.pulipuli.info/2023/03/blog-post_19.html)

#### **Ubuntu18.04æœ‰å‘ï¼ŒæŒ‰ç…§å®˜æ–¹æ•™ç¨‹æ— æ³•æ­£å¸¸å®‰è£…**

[Dockerd-rootless.sh not working on Ubuntu 18.04 because a dependency is missing (vpnkit or slirp4netns) Â· Issue #41781 Â· moby/moby (github.com)](https://github.com/moby/moby/issues/41781)

- éœ€è¦æ‰‹åŠ¨å®‰è£…[`slirp4netns`åŒ…]([Releases Â· rootless-containers/slirp4netns (github.com)](https://github.com/rootless-containers/slirp4netns/releases))ï¼Œè¿™ä¸ªåŒ…æ— æ³•é€šè¿‡apt-getå®‰è£…

### é…ç½®ä»“åº“é•œåƒ

`daemon.json` æ–‡ä»¶åº”è¯¥åœ¨ `~./config/docker/` ä¸‹

***ç»å¤§å¤šæ•°mirroréƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé˜¿é‡Œäº‘çš„å·²ç»ä¸å†æ›´æ–°ï¼Œ`dockerproxy.com`å¥½åƒè¿˜è¡Œï¼Œä¸çŸ¥é“æ˜¯ä¸ªå•¥ç»„ç»‡***

***å­¦æ ¡çš„ç½‘å¥½åƒå¯ä»¥ç›´æ¥è®¿é—®å®˜æ–¹hub***

## å¦‚ä½•å°†Kerasæ¨¡å‹ (Tensorflow) è½¬Torch

[AgCl-LHY/Weights_Keras_2_Pytorch: a python code to convert Keras pre-trained weights to Pytorch version (github.com)](https://github.com/AgCl-LHY/Weights_Keras_2_Pytorch)

***å…³é”®åœ¨äºKerasä¸€äº›å±‚æƒé‡åŒ…çš„å­˜å‚¨æ–¹å¼å’ŒTorchä¸åŒï¼Œè¦è¿›è¡Œä¸€ä¸ªç»´åº¦è½¬åŒ–***

```python
def keras_to_pyt(km, pm):
    weight_dict = dict()
    for layer in km.layers:
        if type(layer) is keras.layers.convolutional.Conv2D:
            if (len(layer.get_weights()) >= 1):
                weight_dict[layer.get_config()['name'] + '.weight'] = np.transpose(layer.get_weights()[0], (3, 2, 0, 1))
            if (len(layer.get_weights()) >= 2):
                weight_dict[layer.get_config()['name'] + '.bias'] = layer.get_weights()[1]
        elif type(layer) is keras.layers.Dense:
            if (len(layer.get_weights()) >= 1):
                weight_dict[layer.get_config()['name'] + '.weight'] = np.transpose(layer.get_weights()[0], (1, 0))
            if (len(layer.get_weights()) >= 2):
                weight_dict[layer.get_config()['name'] + '.bias'] = layer.get_weights()[1]
        elif type(layer) is keras.layers.DepthwiseConv2D:
            if (len(layer.get_weights()) >= 1):
                weight_dict[layer.get_config()['name'] + '.weight'] = np.transpose(layer.get_weights()[0], (2, 3, 0, 1))
            if (len(layer.get_weights()) >= 2):
                weight_dict[layer.get_config()['name'] + '.bias'] = layer.get_weights()[1]
        elif type(layer) is keras.layers.BatchNormalization:
            if (len(layer.get_weights()) >= 1):
                weight_dict[layer.get_config()['name'] + '.weight'] = layer.get_weights()[0]
            if (len(layer.get_weights()) >= 2):
                weight_dict[layer.get_config()['name'] + '.bias'] = layer.get_weights()[1]
            if (len(layer.get_weights()) >= 3):
                weight_dict[layer.get_config()['name'] + '.running_mean'] = layer.get_weights()[2]
            if (len(layer.get_weights()) >= 4):
                weight_dict[layer.get_config()['name'] + '.running_var'] = layer.get_weights()[3]
        elif type(layer) is keras.layers.ReLU:
            pass
        elif type(layer) is keras.layers.Dropout:
            pass
```



## å¦‚ä½•ä»…è®©éƒ¨åˆ†IPé€šè¿‡æŒ‡å®šVPNï¼ˆWindows  é»˜è®¤VPN ä¿®æ”¹è·¯ç”±ï¼‰

[Automatically Add Static Routes After Connecting to VPN | Windows OS Hub (woshub.com)](http://woshub.com/add-routes-after-connect-vpn-windows/)

![uncheck the option "Use default gateway in remote network" in the vpn connection ipv4 properties](http://woshub.com/wp-content/uploads/2021/09/uncheck-the-option-use-default-gateway-in-remote.png)

OR 

```shell
Set-VpnConnection â€“Name workVPN -SplitTunneling $True
```

æ·»åŠ è·¯ç”±ï¼š

```shell
Add-VpnConnectionRoute -ConnectionName workVPN -DestinationPrefix 192.168.11.2/32 -PassThru
```

è¯¥æŒ‡ä»¤æ˜¯åœ¨ä½ æ¿€æ´»VPNçš„æ—¶å€™æ·»åŠ è·¯ç”±ä¿¡æ¯ï¼Œåœ¨é€€å‡ºVPNæœåŠ¡å™¨åï¼Œåˆ é™¤è¯¥è·¯ç”±

åˆ é™¤è·¯ç”±ï¼š

```shell
Remove-VpnConnectionRoute -ConnectionName workVPN -DestinationPrefix 192.168.111.0/24 -PassThru
```

## å¦‚ä½•ä¼ è¾“æ•°æ®é›†

ç›´æ¥ä½¿ç”¨xftpè¿›è¡Œæ‹–æ‹½

### å¯¹äºæ•°ç›®æ¯”è¾ƒå¤šçš„å›¾ç‰‡æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä½¿ç”¨Sftpè¿›è¡Œä¼ è¾“

* ç™»å½•: sftp -P port user@ip  (-P æ˜¯å¤§å†™)
* ä½¿ç”¨ ls å‘½ä»¤åˆ—å‡ºç›®å½•ï¼Œä½¿ç”¨ "cd CloudData" å‘½ä»¤è¿›å…¥æ•°æ®æ ¹ç›®å½•
* ä½¿ç”¨ "get <æ–‡ä»¶å>", ä»äº‘ç›˜ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°å½“å‰ç›®å½•
* ä½¿ç”¨ "get -r <æ–‡ä»¶å¤¹å>", ä»äº‘ç›˜ä¸‹è½½ç›®å½•åˆ°æœ¬åœ°å½“å‰ç›®å½•
* ä½¿ç”¨ "put <æ–‡ä»¶å>", æŠŠå½“å‰ç›®å½•çš„æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°äº‘ç›˜
* ä½¿ç”¨ "put  -r <æ–‡ä»¶å¤¹å>", æŠŠæœ¬åœ°å½“å‰ç›®å½•ä¸Šä¼ 

## Docker æ”¯æŒCUDA

### å®‰è£…[NVIDIA Container Toolkit](https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#docker)

***å¦‚æœä½ æ˜¯Root-lessï¼Œæœ‰å‘ï¼ï¼***

- ä¸‹é¢å‘½ä»¤ä¼šæŠ¥é”™ï¼Œå› ä¸ºRootlessçš„é…ç½®æ–‡ä»¶ä½ç½®ä¸åŒ

```shell
sudo nvidia-ctk runtime configure --runtime=docker
```

è¿™ä¸ªæ—¶å€™å»ºè®®ä½ åœ¨æ™®é€šDockeré…ç½®æ–‡ä»¶åº”åœ¨ä½ç½®`/etc/docker`å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶æ”¹å†™åçš„å†…å®¹åˆ°Rootlessçš„é…ç½®æ–‡ä»¶`.config/docker`ä¸‹ã€‚

- è¿˜è¦è®°å¾—æ”¹` /etc/nvidia-container-runtime/config.toml`ï¼Œå°†é‡Œ é¢çš„`no-cgroups`è®¾ä¸º`true`

**Tips:**

- å®¿ä¸»ä¸»æœºçš„Driverç‰ˆæœ¬è·Ÿä½ åœ¨Containerä¸­èƒ½ç”¨çš„CUDAç‰ˆæœ¬æŒ‚é’©ï¼Œä½ Driverç‰ˆæœ¬å¤ªä½ç”¨ä¸äº†é«˜ç‰ˆæœ¬çš„CUDAã€‚å…¶ä¸­`495ï¼ˆcuda 11.5ï¼‰å’Œ520 (cuda 11.8)`ç‰ˆæœ¬çš„driverå‡ ä¹æ²¡æœ‰å…¼å®¹æ€§ï¼Œå®¿ä¸»ä¸»æœºåƒä¸‡åˆ«æ˜¯è¿™ä¿©ã€‚[CUDAå…¼å®¹æ€§é—®é¢˜ï¼ˆæ˜¾å¡é©±åŠ¨ã€dockerå†…CUDAï¼‰ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/459431437)
- CUDAçš„Forward compatibilityå¥½åƒä»…å¯¹Teslaæ¶æ„çš„æ˜¾å¡æœ‰ç”¨ï¼Œæ‰€ä»¥æœ€å¥½å‡çº§ä½ çš„driverã€‚[PyTorchçš„CUDAé”™è¯¯ï¼šError 804: forward compatibility was attempted on non supported HW - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/361545761)

### ä¸‹è½½æˆ–è€…é…ç½®Image

DockerHub ä¸­ Torchå’ŒNvidiaå®˜æ–¹çš„imageéƒ½æœ‰`devel`è¿™ä¸ªç‰ˆæœ¬ï¼Œå¤§å°ä¼šæ¯”æ™®é€šçš„`runtime`å¤§å¾ˆå¤šã€‚å¦‚æœä½ éœ€è¦åœ¨imageä¸­ä½¿ç”¨cudaç¼–è¯‘æŸä¸ªåŒ…ï¼Œå°±éœ€è¦`devel`ï¼Œå¦‚æœä½ åªæ˜¯æƒ³ç”¨ä¸‹`pytorch-gpu`é‚£å°±å®Œå…¨æ²¡å¿…è¦ã€‚nvidiaçš„å®˜æ–¹base-imageè¿˜è¦é€‰æ‹©æ˜¯å¦ä½¿ç”¨`cudnn`

## åœ¨çº¿å‡çº§UbuntuæœåŠ¡å™¨

### å¤‡ä»½

`sudo timeshift --help`

### å‡çº§

[æœåŠ¡ç«¯å‡çº§Ubuntu 20.04 LTS è®°å½• - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/136109436)

- ä¸è¦æ— è„‘continueï¼Œä¸€å®šè¦çœ‹æ¸…æ¥šï¼Œä¿è¯ç½‘ç»œç•…é€šï¼Œè®°å¾—æå‰æ›´æ¢aptæºï¼Œä¸ç„¶è‚¯å®šå¤±è´¥

- é™¤äº†sshdçš„é…ç½®ä¹‹å¤–ï¼Œå…¶å®ƒé…ç½®éƒ½æ¨èä¸è¦ç»´æŒåŸç‰ˆæœ¬ï¼Œsshdä¸çŸ¥é“ä¹Ÿä¸ä¼šä¸ä¼šå†²çªï¼Œæœ€åéƒ½ç”¨æ–°çš„è‡ªå·±é‡æ–°é…ç½®

## Ubuntué…ç½®Clash

[Releases Â· Dreamacro/clash (github.com)](https://github.com/Dreamacro/clash/releases)

éœ€è¦æ‰‹åŠ¨ä¸‹è½½[Country.mmdb](https://link.zhihu.com/?target=https%3A//gitee.com/mirrors/Pingtunnel/blob/master/GeoLite2-Country.mmdb)ï¼Œå°†å…¶æ”¹åä¸º`Country.mmdb`

ä¸‹è½½`proxychains4`ï¼Œé…ç½®ç›®å½•`/etc/proxychains.conf`

- æ”¹ä¸º `dynamic_chain`
- æ·»åŠ ä»£ç†ipï¼Œå¥½åƒä¸èƒ½æ·»åŠ `https`

æµ‹è¯•æ˜¯å¦æˆåŠŸ

```shell
proxychains4 curl www.httpbin.org/ip
```

**érootå¯èƒ½æŠ¥é”™**ï¼Œè§[proxychains4é…ç½®ä½¿ç”¨ - 0xcreed - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/mwq1024/p/11582003.html)

**proxychains4 å¯¹dockeræ— æ•ˆï¼Œdockerä»£ç†éœ€è¦å•ç‹¬é…ç½®**

## Ubuntuä¸‹æŒ‚è½½ç§»åŠ¨ç¡¬ç›˜å¹¶ä¿®æ”¹æƒé™

- ä¸€æ¬¡æ€§ï¼ŒæŒ‡å®š`uid`å¯ä»¥æ­£å¸¸ä½¿ç”¨ç”¨æˆ·è¯»å†™æ–‡ä»¶å¤¹ï¼Œä¸ç„¶æƒé™é”™è¯¯

  ```shell
  sudo mount -o uid=$UID /dev/sdc1 /mnt/book
  ```

- æ¯æ¬¡å¼€æœºè‡ªåŠ¨æŒ‚è½½

  [ubuntuè‡ªåŠ¨æŒ‚è½½ç¡¬ç›˜å®ç°æ‰€æœ‰ç”¨æˆ·å¯è¯»å†™ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/163001267)

  ```shell
  # æŸ¥çœ‹ TYPE å’Œ UUID
  sudo blkid
  # ç¼–è¾‘ /etc/fstabæ–‡ä»¶
  UUID=$UUID /mnt/book $TYPE defaults,uid=$UID,gid=$GID 0 0
  ```

## è·¨ç½‘æ®µsshè¿æ¥

> è¯¥é—®é¢˜æ ¸å¿ƒåœ¨äºå†…ç½‘ç©¿é€ï¼Œä½†**ipv6**è§£å†³äº†è¯¥é—®é¢˜ï¼Œå› æ­¤ä¸‹é¢éƒ½æ˜¯åŸºäºé€šä¿¡ä¸¤è¾¹éƒ½å…·æœ‰å…¬ç½‘ipv6ä¸”å·²ç»è§£å†³äº†è·¯ç”±å™¨é—®é¢˜å’Œé˜²ç«å¢™é—®é¢˜
>
> sftp: è¦æ³¨æ„åŠ ä¸Š`-6`ï¼Œä¸ç„¶é»˜è®¤ä¼šè§£ææˆipv4çš„åœ°å€ï¼Œè¿˜è¦æŠŠåœ°å€åŠ ä¸Š`[]`
>
> ssh: ç›´æ¥ä½¿ç”¨ipv6åœ°å€å³å¯

## æ­å»ºç§æœ‰Docker Registry

~~[ä½¿ç”¨docker-composeæ­å»ºç§æœ‰docker registry - è½å¶&ä¸éšé£ - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/xpengp/p/12714381.html)~~

[Docker Compose éƒ¨ç½²é…ç½®å’Œä½¿ç”¨ Registry ç§æœ‰é•œåƒä»“åº“ - æ€æœ‰äº‘ - IOIOX](https://www.ioiox.com/archives/140.html)

> TODO:
>
> - [ ] ä»¤ç‰Œè®¤è¯ï¼Œå¯¹ä¸åŒç”¨æˆ·çš„æƒé™è¿›è¡Œè§„èŒƒ

- å¯åŠ¨ä¸€ä¸ªä¸€æ¬¡æ€§å®¹å™¨ç”¨äºåˆ›å»ºè´¦å·å¯†ç .å¯†ç æ–‡ä»¶è·¯å¾„ä»¥`/root/registry/htpasswd`ä¸ºä¾‹,è´¦å·å¯†ç ä»¥`admin`å’Œ`12345678`ä¸ºä¾‹.

  ```shell
  docker run --rm --entrypoint \
      htpasswd httpd:2 -Bbn \
      admin 12345678 > /root/registry/htpasswd
  ```

- `daemon.json`å†™å…¥ï¼š

  ```json
  {
      "insecure-registries": [
          "[ç§æœ‰ä»“åº“ ip:port]"
      ]
  }
  ```

- `docker-compose.yaml`ï¼Œè¯¥æ–‡ä»¶å¯ä»¥åœ¨ä»»æ„ä½ç½®ï¼Œåç»­`-f`æŒ‡å®šå³å¯

  ```yaml
  version: '3'
  
  services:
    registry:
      image: registry:2
      restart: "always"
      ports:
        - 5000:5000
      environment:
        - REGISTRY_AUTH=htpasswd
        - REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd
        - REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm
        - REGISTRY_STORAGE_DELETE_ENABLED=true
      volumes:
        - $DATA_ROOT:/var/lib/registry
        - $PASSWD_ROOT:/auth/htpasswd
  ```


- ä½¿ç”¨`docker-compose`éƒ¨ç½²ä»“åº“

  ```shell
  docker-compose -f $DOCKER_COMPOSE_CONFIG up -d
  ```


### åˆ é™¤Image

[HTTP API V2 | Docker Documentation](https://docs.docker.com/registry/spec/api/#deleting-an-image)

[Dockerç§æœ‰ä»“åº“Registryåˆ é™¤é•œåƒçš„æ–¹æ³•ã€20220321ã€‘ - é¬¼è°·å­å”å” - ä¸ªäººä¸»é¡µ (tongfu.net)](https://tongfu.net/home/35/blog/513697.html)

[dockerç§æœ‰é•œåƒä»“åº“æ­å»ºå’Œé•œåƒåˆ é™¤ - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/b93feaf43f37)

è¿™ä¸ªæ¯”è¾ƒéº»çƒ¦ï¼Œæ€»çš„æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡APIçš„æ–¹æ³•æ¥åˆ ï¼Œä½†ä¹Ÿéœ€è¦ä¿®æ”¹containeré‡Œé¢çš„configï¼Œä½ç½®åœ¨`/etc/docker/registry/config.yml`ï¼Œç„¶åæŸ¥è¯¢`digest`ï¼Œç„¶åæ ¹æ®`digest`è°ƒç”¨`DELETE` APIè¿›è¡Œåˆ é™¤ï¼Œæœ€ååƒåœ¾å›æ”¶

ç¬¬äºŒä¸ªæ”»ç•¥è¯´æ˜¯æ²¡æœ‰åˆ å¹²å‡€ï¼Œä½†æˆ‘å‘ç°å…¶å®ä¸»ä½“æ–‡ä»¶é€šè¿‡ä»¥ä¸Šæ­¥éª¤å¯ä»¥å®Œå…¨åˆ é™¤ï¼Œåªæ˜¯ä¼šç•™ä¸‹ä¸€ä¸ªregistryï¼Œå ç”¨ç©ºé—´å¾ˆå°

## ç”¨Dockerè·‘å®éªŒ

### Imageç®¡ç†

å…ˆçœ‹æœ¬åœ°æœ‰ä»€ä¹ˆç°å­˜çš„`image`

```shell
docker image ls
```

è·‘å®éªŒéœ€è¦çš„ç‰¹åˆ¶åŒ–`image`éƒ½æ”¾åœ¨æœ¬åœ°ä»“åº“ä¸­ï¼Œé€šç”¨çš„è¯·æŸ¥çœ‹ [Docker_Hub](https://hub.docker.com/)ã€‚å…ˆæŸ¥çœ‹æœ¬åœ°ä»“åº“æœ‰å“ªäº›`image`,æœ¬åœ°ä»“åº“`ip`é»˜è®¤ä¸º`10.236.11.202:5000`

```shell
# ç™»é™†æœ¬åœ°ä»“åº“ï¼Œè¾“å…¥è´¦æˆ·åå’Œå¯†ç 
docker login $LOCAL_REGISTRY_IP

# å…ˆæŸ¥çœ‹æœ‰å“ªäº›image
curl -u $USER:$PASSWD http://$LOCAL_REGISTRY_IP/v2/_catalog

# å†æŸ¥çœ‹å…·ä½“çš„imageä¸‹æœ‰å“ªäº›tag
curl -u $USER:$PASSWD http://$LOCAL_REGISTRY_IP/$IMAGE_NAME/tags/list
```

`pull, push`,***éç‰¹æ®Šæƒ…å†µï¼Œä¸è¦éšæ„push imageåˆ°æœ¬åœ°ä»“åº“ä¸­ï¼Œå°±ç®—è¦pushï¼Œä¹Ÿè¦åœ¨commitçš„æ—¶å€™åšå¥½commentï¼Œç„¶å tagå†™æ¸…æ¥šã€‚ç›®å‰æœ¬åœ°ä»“åº“æ²¡æœ‰åšæƒé™é™åˆ¶ï¼Œç™»é™†åå°±å¯ä»¥å¯¹ä¸Šé¢çš„æ‰€æœ‰imageåšä»»ä½•æ“ä½œ***

```shell
# PULLè·Ÿå¸¸è§„ä¸€æ ·ï¼Œåªæ˜¯è¦æ³¨æ„è¦åœ¨imageå‰é¢åŠ ä¸Šæœ¬åœ°ä»“åº“çš„Ipï¼Œå¦åˆ™ä¼šé»˜è®¤ä»docker_hubè·å–
docker pull $LOCAL_REGISTRY_IP/$IMAGE_NAME:$TAG

# push
# pushä¹‹å‰éœ€è¦å…ˆcommitä¸€ä¸ªæœ¬åœ°çš„image
docker commit -a $AUTHOR_NAME -m $COMMENT $CONTAINER $LOCAL_REGISTRY_IP/$IMAGE_NAME:$TAG
docker push $LOCAL_REGISTRY_IP/$IMAGE_NAME:$TAG
```

### è·‘å®éªŒ

å…ˆçœ‹æ˜¯å¦åˆ›å»ºäº†`container`:

```shell
docker ps -a
```

docker ç®¡ç†å·¥å…·æ¨èï¼športainer, å¯ä»¥æ–¹ä¾¿çš„åˆ é™¤ï¼Œé‡å¯ï¼Œæš‚åœï¼Œé‡æ–°é…ç½®dockerå®¹å™¨ã€‚è®¾å®šå¥½dockerå®¹å™¨çš„é…ç½®æ–‡ä»¶å¤¹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿ç§»ã€‚
```shell
docker pull portainer/portainer
docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock --restart=always --name prtainer portainer/portaine
```


å¦‚æœå·²ç»æœ‰åˆ›å»ºå¥½çš„containerå°±ä¸è¦å†`run`

```shell
# é’ˆå¯¹å·²ç»stoppedçš„container
docker start -a $CONTAINER_NAME

# é’ˆå¯¹è¿˜åœ¨è¿è¡Œä¸­çš„container
docker attach $CONTAINER_NAME
```

å¦‚æœæ²¡æœ‰ç°å­˜`container`ï¼Œå°±ç›´æ¥ä»`run image`ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œ`timm`åº“å’Œ`torch`çš„æ¨¡å‹é»˜è®¤çš„æƒé‡æ–‡ä»¶å­˜æ”¾åœ¨`./cache/huggingface`å’Œ`./cache/torch`ä¸­ï¼Œæœ€å¥½ä¹ŸæŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹åšæ˜ å°„é¿å…åœ¨ä¸åŒ`image`ä¸­é‡å¤ä¸‹è½½ã€‚å°½é‡åªæ˜ å°„`huggingface`å’Œ`torch`è¿™ä¸¤ä¸ªå­æ–‡ä»¶å¤¹ï¼Œ`$LIB`å°±æ˜¯`huggingface`æˆ–è€…`torch`ã€‚

```shell
docker run --gpus all -it --shm-size 32g -p $CONTAINER_SSH_PORT:22 -v $CODE_DIR:/workspace/code -v $DATASET_DIR:/workspace/dataset -v $OUTPUT_DIR:/workspace/output -v $CACHE_DIR:/root/.cache/$LIB --name $CONTAINER_NAME $IMAGE_NAME
```

### SSHè¿æ¥

æƒ³è¦ä½¿ç”¨`ssh`è¿æ¥`container`

- é¦–å…ˆè¦åœ¨åˆ›å»ºæ—¶è¿›è¡Œç«¯å£æ˜ å°„`-p $CONTAINER_SSH_PORT:22` 

- å°†å®¢æˆ·ç«¯å…¬é’¥æ”¾å…¥`/root/.ssh/authorized_keys`ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºè¯¥æ–‡ä»¶
- è®°å¾—æŸ¥çœ‹`container`ä¸­æ˜¯å¦å·²ç»æ‰“å¼€`ssh_server`æœåŠ¡ï¼š`service ssh start` 
- å»ºè®®ä½¿ç”¨`tmux`è¿›è¡Œå®éªŒï¼Œç¡®ä¿åœ¨`terminal`å´©æºƒçš„æƒ…å†µä¸‹ï¼Œå®éªŒèƒ½å¤Ÿç»§ç»­
  
### ç½‘ç»œç›¸å…³

- æœ€å¥½ç›´æ¥ä½¿ç”¨`host`ç½‘ç»œï¼ˆ`--network host`ï¼‰ï¼Œè·‘å®éªŒç”¨çš„`container`ä¸ªäººæ„Ÿè§‰ä¸éœ€è¦å¤æ‚çš„é€šè®¯ï¼Œå…¶å¸¦æ¥çš„å¥½å¤„å’Œä¾¿åˆ©éå¸¸è¯±äººï¼Œä¾‹å¦‚ï¼šå®Œæ•´çš„`ipv6`æ”¯æŒ

### é‡è£…é©±åŠ¨

- é¦–å…ˆæŸ¥çœ‹å½“å‰é©±åŠ¨ç‰ˆæœ¬
```shell
ls /usr/src | grep nvidia
```
- é‡æ–°å®‰è£…ç°æœ‰çš„é©±åŠ¨ç‰ˆæœ¬
```shell
sudo dkms install -m nvidia -v 450.57 # ç‰ˆæœ¬å³ä½¿ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡º
# å¦‚æœæ²¡æœ‰å®‰è£…dkmsåŒ…
sudo apt-get install dkms
```
- é‡å¯
```shell
sudo reboot
```
